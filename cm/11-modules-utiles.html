
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>8. Modules utiles &#8212; Python</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="9. Annexe : les booléens en python (&gt;3.6)" href="a1-booleens.html" />
    <link rel="prev" title="7. Les entrées-sorties (E/S) : aspects avancés" href="9-ES-avancees.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/python.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Python</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../bonjour.html">
                    Bienvenu en Prog Python!
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  COURS
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="0-synthese.html">
   1. Synthèse introductive à Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="1-fonctions.html">
   2. Fonctions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2-boucles-avancees.html">
   3. Boucles, tableaux et fonctions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="3-ES-fichiers.html">
   4. Entrées-sorties simples avec des fichiers
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="5-types_composes.html">
   5. Les types composés
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="7-fonctions-avancees.html">
   6. Sous-programme et affectation – aspects avancés
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="9-ES-avancees.html">
   7. Les entrées-sorties (E/S) : aspects avancés
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   8. Modules utiles
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="a1-booleens.html">
   9. Annexe : les booléens en python (&gt;3.6)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="a2-ndarray.html">
   10. Les ‘ndarray’ : de vrais tableaux en python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="a3-exceptions.html">
   11. Exceptions
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  TP
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../tp/0-installation.html">
   1. Préparer son ordinateur et travailler avec Python et JupyterLab
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tp/1-bases.html">
   2. Feuille 1
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Compléments
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../pdf/memento.html">
   1. Memento
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/phillanglois/Python/main?urlpath=tree/chps2022/cm/11-modules-utiles.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>
<a href="https://github.com/phillanglois/Python/issues/new?title=Issue%20on%20page%20%2Fcm/11-modules-utiles.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="bottom"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>

</a>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/cm/11-modules-utiles.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#de-l-alea-avec-le-module-random">
   8.1. De l’aléa avec le module
   <code class="docutils literal notranslate">
    <span class="pre">
     random
    </span>
   </code>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#principe-d-un-generateur-pseudo-aleatoire">
     8.1.1. Principe d’un générateur
     <strong>
      pseudo
     </strong>
     -aléatoire
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#fonctions-utiles">
     8.1.2. Fonctions utiles
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tracer-avec-matplotlib">
   8.2. Tracer avec
   <code class="docutils literal notranslate">
    <span class="pre">
     matplotlib
    </span>
   </code>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#matplotlib-qu-est-ce-que-ca-fait">
     8.2.1.
     <code class="docutils literal notranslate">
      <span class="pre">
       matplotlib
      </span>
     </code>
     : qu’est ce que ça fait ?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#matplotlib-comment-ca-le-fait">
     8.2.2.
     <code class="docutils literal notranslate">
      <span class="pre">
       matplotlib
      </span>
     </code>
     : comment ça le fait ?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercice">
     8.2.3. Exercice
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#manipuler-des-images-avec-matplotlib">
     8.2.4. Manipuler des images avec
     <code class="docutils literal notranslate">
      <span class="pre">
       matplotlib
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-vous-maintenant">
     8.2.5. A vous maintenant !
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#le-flocon-de-von-koch">
       Le flocon de Von Koch
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#star-mesurer-le-temps-d-execution-d-un-programme">
   8.3. (
   <span class="math notranslate nohighlight">
    \(\star\)
   </span>
   ) Mesurer le temps d’exécution d’un programme
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pas-si-simple">
     8.3.1. Pas si simple …
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#mesurer-avec-le-module-time">
     8.3.2. Mesurer avec le module
     <code class="docutils literal notranslate">
      <span class="pre">
       time
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#un-benchmark-en-theta-n-la-somme-iterative">
     8.3.3. Un
     <em>
      benchmark
     </em>
     en
     <span class="math notranslate nohighlight">
      \(\theta(n)\)
     </span>
     : la somme itérative
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#un-premier-exemple">
     8.3.4. Un premier exemple
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#premiere-mesure-de-complexite">
   8.4. Première mesure de complexité
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#des-donnees-de-taille-variable">
     8.4.1. Des données de taille variable
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Modules utiles</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#de-l-alea-avec-le-module-random">
   8.1. De l’aléa avec le module
   <code class="docutils literal notranslate">
    <span class="pre">
     random
    </span>
   </code>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#principe-d-un-generateur-pseudo-aleatoire">
     8.1.1. Principe d’un générateur
     <strong>
      pseudo
     </strong>
     -aléatoire
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#fonctions-utiles">
     8.1.2. Fonctions utiles
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tracer-avec-matplotlib">
   8.2. Tracer avec
   <code class="docutils literal notranslate">
    <span class="pre">
     matplotlib
    </span>
   </code>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#matplotlib-qu-est-ce-que-ca-fait">
     8.2.1.
     <code class="docutils literal notranslate">
      <span class="pre">
       matplotlib
      </span>
     </code>
     : qu’est ce que ça fait ?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#matplotlib-comment-ca-le-fait">
     8.2.2.
     <code class="docutils literal notranslate">
      <span class="pre">
       matplotlib
      </span>
     </code>
     : comment ça le fait ?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercice">
     8.2.3. Exercice
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#manipuler-des-images-avec-matplotlib">
     8.2.4. Manipuler des images avec
     <code class="docutils literal notranslate">
      <span class="pre">
       matplotlib
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-vous-maintenant">
     8.2.5. A vous maintenant !
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#le-flocon-de-von-koch">
       Le flocon de Von Koch
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#star-mesurer-le-temps-d-execution-d-un-programme">
   8.3. (
   <span class="math notranslate nohighlight">
    \(\star\)
   </span>
   ) Mesurer le temps d’exécution d’un programme
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pas-si-simple">
     8.3.1. Pas si simple …
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#mesurer-avec-le-module-time">
     8.3.2. Mesurer avec le module
     <code class="docutils literal notranslate">
      <span class="pre">
       time
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#un-benchmark-en-theta-n-la-somme-iterative">
     8.3.3. Un
     <em>
      benchmark
     </em>
     en
     <span class="math notranslate nohighlight">
      \(\theta(n)\)
     </span>
     : la somme itérative
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#un-premier-exemple">
     8.3.4. Un premier exemple
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#premiere-mesure-de-complexite">
   8.4. Première mesure de complexité
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#des-donnees-de-taille-variable">
     8.4.1. Des données de taille variable
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="modules-utiles">
<span id="ch-modulesutiles"></span><h1><span class="section-number">8. </span>Modules utiles<a class="headerlink" href="#modules-utiles" title="Permalink to this headline">#</a></h1>
<p>Mis à jour : Sep 28, 2022, lecture : 8
minutes minimum, PhL.</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">random</span></code>, <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> et <code class="docutils literal notranslate"><span class="pre">time</span></code></strong>  pour des expériences de complexité, entre autres.</p>
<p>Petites expériences qui nous permettent de découvrir des modules bien utiles :</p>
<ul class="simple">
<li><p>d’introduire <strong>de l’aléatoire</strong> avec <code class="docutils literal notranslate"><span class="pre">random</span></code></p>
<ul>
<li><p>pour générer des données de test, de débug, …</p></li>
</ul>
</li>
<li><p>d’apprendre à <strong>faire des graphiques</strong> avec <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code></p></li>
<li><p>d’utiliser des fonctions de modules importés du module <code class="docutils literal notranslate"><span class="pre">time</span></code> pour <strong>mesurer des temps d’exécution</strong>,</p>
<ul>
<li><p>et ainsi apprécier la validité et les limites de la notion de complexité algorithmique,</p></li>
</ul>
</li>
</ul>
<section id="de-l-alea-avec-le-module-random">
<h2><span class="section-number">8.1. </span>De l’aléa avec le module <code class="docutils literal notranslate"><span class="pre">random</span></code><a class="headerlink" href="#de-l-alea-avec-le-module-random" title="Permalink to this headline">#</a></h2>
<p>Commençons par ce module déjà utilisé au semestre 1.</p>
<p>Les expérimentations demandent souvent <em>mais pas systématiquement</em> de générer des données aléatoires.<br />
Le module <code class="docutils literal notranslate"><span class="pre">random</span></code> permet ça, ou presque car la génération <strong>déterministe</strong> de valeurs a priori quelconques est un processus <strong>pseudo-aléatoire</strong> .</p>
<section id="principe-d-un-generateur-pseudo-aleatoire">
<h3><span class="section-number">8.1.1. </span>Principe d’un générateur <strong>pseudo</strong>-aléatoire<a class="headerlink" href="#principe-d-un-generateur-pseudo-aleatoire" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>une graine : <span class="math notranslate nohighlight">\(u_0\)</span></p></li>
<li><p>une récurrence déterministe : <span class="math notranslate nohighlight">\(u_n = f(u_{n-1})\)</span> où <span class="math notranslate nohighlight">\(f\)</span> définit de l’<em>aléa</em>.</p></li>
</ul>
</section>
<section id="fonctions-utiles">
<h3><span class="section-number">8.1.2. </span>Fonctions utiles<a class="headerlink" href="#fonctions-utiles" title="Permalink to this headline">#</a></h3>
<p>Après un :</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">random.seed()</span></code> : graine du générateur</p>
<ul>
<li><p>fixer la graine permet la <em>reproductibilité</em> de la génération pseudo-aléatoire</p></li>
</ul>
</li>
</ul>
<p><strong>Lois discrètes (entières)</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">random.randint(a,</span> <span class="pre">b)</span></code> : uniforme <em>discrète</em> sur [a, b] &lt;– remarquer l’intervalle fermé !</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">random.randrange(a,</span> <span class="pre">b,</span> <span class="pre">pas)</span></code> : uniforme <em>discrète</em> sur [a, a+pas, a+2*pas, …, b[ (intervalle ouvert à droite)</p></li>
</ul>
<p><strong>Lois continues</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">random.random()</span></code>  : uniforme sur [0,1]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">random.uniform(a,</span> <span class="pre">b)</span></code> :  uniforme sur [a,b]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">random.gauss(moyenne,</span> <span class="pre">ecart_type)</span></code> : Normal(<span class="math notranslate nohighlight">\(\mu\)</span>, <span class="math notranslate nohighlight">\(\sigma\)</span>)</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#help(random)</span>

<span class="n">n</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">t0</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
<span class="n">t1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
<span class="n">t2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
<span class="n">t3</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>

<span class="c1"># graine arbitrairement choisie par le système </span>
<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">t0</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">t1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>

<span class="c1"># on bloque la graine</span>
<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">12345</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">t2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>

<span class="c1"># on reprend la même graine </span>
<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">12345</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">t3</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">t0</span> <span class="o">==</span> <span class="n">t1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">t1</span> <span class="o">==</span> <span class="n">t2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">t2</span> <span class="o">==</span> <span class="n">t3</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">t1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">t2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>False
False
True
[0.05238410645293934, 0.8126688067279872, 0.6893762940225628, 0.8192012390691013, 0.6298963580114144, 0.6260658876418524, 0.9967084428425973, 0.5346772804759685, 0.07243281883378372, 0.6520238806480892]
[0.41661987254534116, 0.010169169457068361, 0.8252065092537432, 0.2986398551995928, 0.3684116894884757, 0.19366134904507426, 0.5660081687288613, 0.1616878239293682, 0.12426688428353017, 0.4329362680099159]
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="tracer-avec-matplotlib">
<h2><span class="section-number">8.2. </span>Tracer avec <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code><a class="headerlink" href="#tracer-avec-matplotlib" title="Permalink to this headline">#</a></h2>
<p>C’est utile … et pas moche !</p>
<section id="matplotlib-qu-est-ce-que-ca-fait">
<h3><span class="section-number">8.2.1. </span><code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> : qu’est ce que ça fait ?<a class="headerlink" href="#matplotlib-qu-est-ce-que-ca-fait" title="Permalink to this headline">#</a></h3>
<p>Le module python <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> est un module adapté à tous les types de tracés
scientifiques : courbes, histogrammes, nuages de points, <span class="math notranslate nohighlight">\(\dots\)</span>
On verra même qu’il permet d’afficher des images, ds photos, …</p>
<ul class="simple">
<li><p>Ses options sont très nombreuses, de même que la documentation en
ligne ou “livrée avec”.
<code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> est composé de nombreux sous-modules.
Parmi ceux-ci, celui qui nous intéresse est <code class="docutils literal notranslate"><span class="pre">pyplot</span></code>.<br />
L’instruction suivante est très très classique.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>L’utilisation basique de <code class="docutils literal notranslate"><span class="pre">pyplot</span></code> consiste :</p>
<ul>
<li><p>à tracer des courbes <span class="math notranslate nohighlight">\(x-y\)</span></p></li>
<li><p>à partir de listes de points, d’un fichier de valeurs ou d’une expression,</p></li>
<li><p>de choisir les bons axes, les bonnes échelles,</p></li>
<li><p>d’indiquer les noms des courbes et des axes,</p></li>
<li><p>de visualiser les tracés à l’écran</p></li>
<li><p>et de les sauvegarder dans des fichiers (pdf ou png).</p></li>
</ul>
</li>
<li><p>En pratique, chaque action <em>modifie l’état de la figure</em> en cours d’élaboration.<br />
Une action est un appel de fonction <code class="docutils literal notranslate"><span class="pre">plt</span></code>.<br />
Il peut être utile de tracer plusieurs “sous-figures” au sein d’une
même figure.</p></li>
</ul>
<p>Le module python <code class="docutils literal notranslate"><span class="pre">numpy</span></code> est le compagnon naturel de <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="matplotlib-comment-ca-le-fait">
<h3><span class="section-number">8.2.2. </span><code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> : comment ça le fait ?<a class="headerlink" href="#matplotlib-comment-ca-le-fait" title="Permalink to this headline">#</a></h3>
<p>Une première prise en main grâce à :</p>
<ul class="simple">
<li><p>ces synthèses très  bien faites pour niveaux <a class="reference external" href="https://matplotlib.org/cheatsheets/_images/handout-beginner.png">débutant</a> ou <a class="reference external" href="https://matplotlib.org/cheatsheets/_images/handout-intermediate.png">intermédiaire</a> et <a class="reference external" href="https://matplotlib.org/cheatsheets/_images/handout-tips.png">des compléments</a></p></li>
<li><p>ces 2 feuilles de résumé de commandes : <a class="reference external" href="https://matplotlib.org/cheatsheets/_images/cheatsheets-1.png">résumé 1</a>, <a class="reference external" href="https://matplotlib.org/cheatsheets/_images/cheatsheets-2.png">résumé 2</a></p></li>
</ul>
<p>De façon plus guidée :</p>
<ul class="simple">
<li><p>le chapitre <a class="reference external" href="https://pnavaro.github.io/python-notebooks/12-Matplotlib.html">Matplotlib</a> de ce cours orienté “Calcul scientifique”</p></li>
<li><p><a class="reference external" href="http://www.labri.fr/perso/nrougier/teaching/matplotlib/">cette autre présentation</a> en français</p></li>
<li><p>ou <a class="reference external" href="https://realpython.com/python-matplotlib-guide/">celle ci</a>, en anglais et extraite du site de qualité <a class="reference external" href="https://realpython.com">realpython.com</a></p></li>
<li><p>les “tutoriaux” de <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> en anglais mais par niveau : <a class="reference external" href="https://matplotlib.org/stable/tutorials/index.html">débutant</a>, <a class="reference external" href="https://matplotlib.org/stable/tutorials/index.html#intermediate">intermédiaire</a> ou <a class="reference external" href="https://matplotlib.org/stable/tutorials/index.html#advanced">avancé</a></p></li>
<li><p>ou enfin le chapitre 3 du <a class="reference external" href="https://matplotlib.org/contents.html"><em>user guide</em></a> (qui comporte plus de 2500 pages).</p></li>
</ul>
<p><strong>Vocabulaire et notions de base</strong></p>
<p>Le schéma suivant illustre les principales notions de base d’un tracé <code class="docutils literal notranslate"><span class="pre">pyplot</span></code>.</p>
<p><img alt="" src="../_images/vocab_pyplot.png" /></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">figure</span></code> est un regroupement d’un ou plusieurs <code class="docutils literal notranslate"><span class="pre">axes</span></code> <strong>avec <code class="docutils literal notranslate"><span class="pre">es</span></code></strong> (<em>ie.</em> un container python d’objets <code class="docutils literal notranslate"><span class="pre">axes</span></code>)</p>
<ul>
<li><p>plusieurs <code class="docutils literal notranslate"><span class="pre">axes</span></code> sont stockés comme un tableau d’<code class="docutils literal notranslate"><span class="pre">axes</span></code> sous la forme d’un <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> <code class="docutils literal notranslate"><span class="pre">numpy</span></code> (et donc avec un indiçage différent des <code class="docutils literal notranslate"><span class="pre">list</span></code>2D python)</p></li>
</ul>
</li>
<li><p>un <code class="docutils literal notranslate"><span class="pre">axes</span></code> <strong>avec <code class="docutils literal notranslate"><span class="pre">es</span></code></strong>  (le pluriel de <em>axis</em>) représente un tracé (d’une ou plusieurs courbes, diagrammes en bâtons, …). Il est donc composé d’<code class="docutils literal notranslate"><span class="pre">axis</span></code> (avec <code class="docutils literal notranslate"><span class="pre">is</span></code>) : les “axes des x, des y”, d’échelles, de légendes, titres …</p>
<ul>
<li><p>ne pas confondre <code class="docutils literal notranslate"><span class="pre">axes</span></code> et <code class="docutils literal notranslate"><span class="pre">axis</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">axes</span></code> est l’objet central : pour obtenir un tracé, on va manipuler un <code class="docutils literal notranslate"><span class="pre">axes</span></code> par des appels de fonctions-méthodes spécifiques</p></li>
<li><p>chaque appel modifie l’état de l’<code class="docutils literal notranslate"><span class="pre">axes</span></code> : définir  des <code class="docutils literal notranslate"><span class="pre">axis</span></code>, leur échelle, tracer les courbes, ajouter un titre, … on procède par couches successives</p>
<ul>
<li><p>le cas échéant on changera d’<code class="docutils literal notranslate"><span class="pre">axes</span></code> pour effectuer d’autres manipulations</p></li>
</ul>
</li>
<li><p>et on affichera l’état final de la  <code class="docutils literal notranslate"><span class="pre">figure</span></code></p></li>
</ul>
</li>
</ul>
<p>Ces notions sont hiérarchiques :<br />
<code class="docutils literal notranslate"><span class="pre">figure</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">axes</span></code> &gt; (<code class="docutils literal notranslate"><span class="pre">xaxis</span></code>, <code class="docutils literal notranslate"><span class="pre">yaxis</span></code>, <code class="docutils literal notranslate"><span class="pre">title</span></code>, <code class="docutils literal notranslate"><span class="pre">xlabel</span></code>, …) &gt; <code class="docutils literal notranslate"><span class="pre">xticks</span></code>,</p>
<p>On va montrer quelques commandes de base :</p>
<ul class="simple">
<li><p>crée une <code class="docutils literal notranslate"><span class="pre">figure</span></code> et le/les <code class="docutils literal notranslate"><span class="pre">axes</span></code> (un par défaut) qui la compose : <code class="docutils literal notranslate"><span class="pre">subplots()</span></code></p></li>
<li><p>afficher de courbes : <strong><code class="docutils literal notranslate"><span class="pre">plot</span></code></strong>, <code class="docutils literal notranslate"><span class="pre">title</span></code>, <code class="docutils literal notranslate"><span class="pre">legend</span></code> ;</p></li>
<li><p>gérer les <code class="docutils literal notranslate"><span class="pre">axis</span></code> : <code class="docutils literal notranslate"><span class="pre">xticks</span></code>, <code class="docutils literal notranslate"><span class="pre">xlim</span></code>, <code class="docutils literal notranslate"><span class="pre">loglog</span></code>, <code class="docutils literal notranslate"><span class="pre">semilogx</span></code> ;</p></li>
<li><p>gérer les affichages : <code class="docutils literal notranslate"><span class="pre">show</span></code>, <code class="docutils literal notranslate"><span class="pre">savefig</span></code>, <code class="docutils literal notranslate"><span class="pre">close</span></code>.</p></li>
</ul>
</section>
<section id="exercice">
<h3><span class="section-number">8.2.3. </span>Exercice<a class="headerlink" href="#exercice" title="Permalink to this headline">#</a></h3>
<p>Obtenir le tracé des principales classes de complexités : <span class="math notranslate nohighlight">\(log_2n\)</span>, <span class="math notranslate nohighlight">\(n\)</span>, <span class="math notranslate nohighlight">\(n\ \log_2(n)\)</span>, <span class="math notranslate nohighlight">\(n^2\)</span>, <span class="math notranslate nohighlight">\(n^3\)</span>, <span class="math notranslate nohighlight">\(2^n\)</span>
pour les premières puissances de 2 – par exemple de 2 à 128.</p>
<p>A votre avis, pourquoi des échelles logarithmiques sont adaptées ?</p>
<p><strong>Rmq.</strong></p>
<ul class="simple">
<li><p>La solution intègre en commentaires quelques commandes utiles au traitement hors des notebook, cad. dans un programme python écrit sous l’idle par exemple.</p></li>
<li><p>ligne 45 : elle suppose l’existence d’un répertoire <code class="docutils literal notranslate"><span class="pre">./tmp</span></code> (à adapter si besoin)</p></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Obtenir une figure pertinente est un <em>vrai travail</em> qui s’effectue en plusieurs itérations.
Il est conseillé de “jouer” avec les différentes commandes jusqu’à obtenir le support graphique qui correspond au message que l’on veut faire passer, celui-ci devant être adapté au public visé.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># complexites.py</span>
<span class="sd">&quot;&quot;&quot;Trace des principales classes de complexites avec matplotlib&quot;&quot;&quot;</span>

<span class="c1"># la figure et ces zones de tracé : ici une seule (ax)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="c1"># son titre</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Principales fonctions de complexité&quot;</span><span class="p">)</span>

<span class="c1"># valeurs d&#39;évaluations</span>
<span class="n">n</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="o">**</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">8</span><span class="p">)]</span>  <span class="c1"># les premieres puissances de 2  </span>

<span class="c1"># tracés des évaluations</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">n</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;$2^n$&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;$n^3$&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;$n^2$&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;$n\ \log_2(n)$&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;$n$&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;$\log_2(n)$&quot;</span><span class="p">)</span>

<span class="c1"># ses axes en log2 : pour bien voir</span>
<span class="c1">#ax.set_xscale(&quot;log&quot;, base=2)</span>
<span class="c1">#ax.set_yscale(&quot;log&quot;, base=2)</span>

<span class="c1"># valeurs affichees sur l axe des x</span>
<span class="n">label_x</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">n</span><span class="p">]</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">label_x</span><span class="p">)</span>

<span class="c1"># valeurs affichees sur l axe des y</span>
<span class="c1">#y_val = [np.power(2, j) for j in range(0, 15, 2)]</span>
<span class="c1">#label_y = [str(val) for val in y_val]</span>
<span class="c1">#ax.set_yticks(y_val, label_y)</span>

<span class="c1"># on limite les valeurs de y trop grandes</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">14</span><span class="p">))</span>
<span class="c1">#</span>

<span class="c1"># afficher la légende à cette position</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper right&quot;</span><span class="p">)</span>

<span class="c1"># sortie ecran (inutile sous notebook)</span>
<span class="c1">#fig.show()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.legend.Legend at 0x7f9be49f3eb0&gt;
</pre></div>
</div>
<img alt="../_images/11-modules-utiles_22_1.png" src="../_images/11-modules-utiles_22_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#ou fichier pdf : suppose l&#39;existence d&#39;un repertoire ./tmp</span>
<span class="kn">from</span> <span class="nn">matplotlib.backends.backend_pdf</span> <span class="kn">import</span> <span class="n">PdfPages</span> 

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span> <span class="n">dpi</span> <span class="o">=</span> <span class="mi">80</span><span class="p">)</span>  <span class="c1"># size est en pouce...</span>
<span class="n">pp</span> <span class="o">=</span> <span class="n">PdfPages</span><span class="p">(</span><span class="s1">&#39;./tmp/plt-complexites.pdf&#39;</span><span class="p">)</span>
<span class="n">pp</span><span class="o">.</span><span class="n">savefig</span><span class="p">()</span>
<span class="n">pp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="nn">/var/folders/32/9hkmzrf11t38ckpktjnyfsfc0000gn/T/ipykernel_2548/1217485147.py</span> in <span class="ni">&lt;cell line: 2&gt;</span><span class="nt">()</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1">#ou fichier pdf : suppose l&#39;existence d&#39;un repertoire ./tmp</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="kn">from</span> <span class="nn">matplotlib.backends.backend_pdf</span> <span class="kn">import</span> <span class="n">PdfPages</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> 
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span> <span class="n">dpi</span> <span class="o">=</span> <span class="mi">80</span><span class="p">)</span>  <span class="c1"># size est en pouce...</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="n">pp</span> <span class="o">=</span> <span class="n">PdfPages</span><span class="p">(</span><span class="s1">&#39;./tmp/plt-complexites.pdf&#39;</span><span class="p">)</span>

<span class="o">~/.</span><span class="n">local</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">virtualenvs</span><span class="o">/</span><span class="n">Python</span><span class="o">-</span><span class="n">RIyjAoYI</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="mf">.9</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">matplotlib</span><span class="o">/</span><span class="n">backends</span><span class="o">/</span><span class="n">backend_pdf</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">     </span><span class="mi">45</span> <span class="kn">from</span> <span class="nn">matplotlib.dates</span> <span class="kn">import</span> <span class="n">UTC</span>
<span class="g g-Whitespace">     </span><span class="mi">46</span> <span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">_path</span>
<span class="ne">---&gt; </span><span class="mi">47</span> <span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">_backend_pdf_ps</span>
<span class="g g-Whitespace">     </span><span class="mi">48</span> 
<span class="g g-Whitespace">     </span><span class="mi">49</span> <span class="n">_log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="o">~/.</span><span class="n">local</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">virtualenvs</span><span class="o">/</span><span class="n">Python</span><span class="o">-</span><span class="n">RIyjAoYI</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="mf">.9</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">matplotlib</span><span class="o">/</span><span class="n">backends</span><span class="o">/</span><span class="n">_backend_pdf_ps</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span> <span class="kn">import</span> <span class="nn">functools</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span> 
<span class="ne">----&gt; </span><span class="mi">8</span> <span class="kn">from</span> <span class="nn">fontTools</span> <span class="kn">import</span> <span class="n">subset</span>
<span class="g g-Whitespace">      </span><span class="mi">9</span> 
<span class="g g-Whitespace">     </span><span class="mi">10</span> <span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>

<span class="o">~/.</span><span class="n">local</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">virtualenvs</span><span class="o">/</span><span class="n">Python</span><span class="o">-</span><span class="n">RIyjAoYI</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="mf">.9</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">fontTools</span><span class="o">/</span><span class="n">subset</span><span class="o">/</span><span class="fm">__init__</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">     </span><span class="mi">15</span> <span class="kn">from</span> <span class="nn">fontTools.subset.cff</span> <span class="kn">import</span> <span class="o">*</span>
<span class="g g-Whitespace">     </span><span class="mi">16</span> <span class="kn">from</span> <span class="nn">fontTools.subset.svg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="ne">---&gt; </span><span class="mi">17</span> <span class="kn">from</span> <span class="nn">fontTools.varLib</span> <span class="kn">import</span> <span class="n">varStore</span>  <span class="c1"># for subset_varidxes</span>
<span class="g g-Whitespace">     </span><span class="mi">18</span> <span class="kn">import</span> <span class="nn">sys</span>
<span class="g g-Whitespace">     </span><span class="mi">19</span> <span class="kn">import</span> <span class="nn">struct</span>

<span class="o">~/.</span><span class="n">local</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">virtualenvs</span><span class="o">/</span><span class="n">Python</span><span class="o">-</span><span class="n">RIyjAoYI</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="mf">.9</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">fontTools</span><span class="o">/</span><span class="n">varLib</span><span class="o">/</span><span class="fm">__init__</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">     </span><span class="mi">33</span> <span class="kn">from</span> <span class="nn">fontTools.varLib.merger</span> <span class="kn">import</span> <span class="n">VariationMerger</span><span class="p">,</span> <span class="n">COLRVariationMerger</span>
<span class="g g-Whitespace">     </span><span class="mi">34</span> <span class="kn">from</span> <span class="nn">fontTools.varLib.mvar</span> <span class="kn">import</span> <span class="n">MVAR_ENTRIES</span>
<span class="ne">---&gt; </span><span class="mi">35</span> <span class="kn">from</span> <span class="nn">fontTools.varLib.iup</span> <span class="kn">import</span> <span class="n">iup_delta_optimize</span>
<span class="g g-Whitespace">     </span><span class="mi">36</span> <span class="kn">from</span> <span class="nn">fontTools.varLib.featureVars</span> <span class="kn">import</span> <span class="n">addFeatureVariations</span>
<span class="g g-Whitespace">     </span><span class="mi">37</span> <span class="kn">from</span> <span class="nn">fontTools.designspaceLib</span> <span class="kn">import</span> <span class="n">DesignSpaceDocument</span><span class="p">,</span> <span class="n">InstanceDescriptor</span>

<span class="o">~/.</span><span class="n">local</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">virtualenvs</span><span class="o">/</span><span class="n">Python</span><span class="o">-</span><span class="n">RIyjAoYI</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="mf">.9</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">fontTools</span><span class="o">/</span><span class="n">varLib</span><span class="o">/</span><span class="n">iup</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">     </span><span class="mi">15</span>         <span class="kn">from</span> <span class="nn">fontTools.misc</span> <span class="kn">import</span> <span class="n">cython</span>
<span class="g g-Whitespace">     </span><span class="mi">16</span> 
<span class="ne">---&gt; </span><span class="mi">17</span> <span class="k">if</span> <span class="n">cython</span><span class="o">.</span><span class="n">compiled</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">18</span>         <span class="c1"># Yep, I&#39;m compiled.</span>
<span class="g g-Whitespace">     </span><span class="mi">19</span>         <span class="n">COMPILED</span> <span class="o">=</span> <span class="kc">True</span>

<span class="ne">AttributeError</span>: module &#39;cython&#39; has no attribute &#39;compiled&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="manipuler-des-images-avec-matplotlib">
<h3><span class="section-number">8.2.4. </span>Manipuler des images avec <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code><a class="headerlink" href="#manipuler-des-images-avec-matplotlib" title="Permalink to this headline">#</a></h3>
<p>Il est classique de définir des images à niveaux de gris par un tableau 2D d’entiers compris en 0 (noir) et 255 (blanc).</p>
<p>Voyons comment afficher de telles images avec <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>.</p>
<p>Si ce n’est pas encore fait, on importe <code class="docutils literal notranslate"><span class="pre">matplotlib.pyplot</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>
</div>
</div>
</div>
<p>On définit 4 images basiques à l’aide de tableaux python.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">c</span> <span class="o">=</span> <span class="mi">4</span>

<span class="n">t0</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">c</span><span class="p">)]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">l</span><span class="p">)]</span> <span class="c1"># un tableau de 0</span>
<span class="n">t127</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">127</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">c</span><span class="p">)]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">l</span><span class="p">)]</span> <span class="c1"># un tableau de 127</span>
<span class="n">t255</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">255</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">c</span><span class="p">)]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">l</span><span class="p">)]</span> <span class="c1"># # un tableau de 255</span>

<span class="c1"># un degradé de valeurs de 0 à 255</span>
<span class="n">unit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">255</span><span class="o">/</span><span class="p">(</span><span class="n">l</span><span class="o">*</span><span class="n">c</span><span class="p">))</span> 
<span class="n">t</span> <span class="o">=</span> <span class="p">[[</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="o">*</span><span class="n">c</span><span class="p">)</span> <span class="o">*</span> <span class="n">unit</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">c</span><span class="p">)]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">l</span><span class="p">)]</span> 

<span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[0, 21, 42, 63], [84, 105, 126, 147], [168, 189, 210, 231]]
</pre></div>
</div>
</div>
</div>
<p>Avec la fonction-méthode <code class="docutils literal notranslate"><span class="pre">.matshow()</span></code>, on affiche les images correspondants aux tableaux définis plus haut.<br />
On note les paramètres effectifs qui définissent comment interpréter les valeurs du tableau :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cmap</span></code> (<em>color map</em>) ici une échelle de gris définie à partir de :</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vmin</span></code> jusqu’à</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vmax</span></code>.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">,</span> <span class="n">ax3</span><span class="p">,</span> <span class="n">ax4</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">matshow</span><span class="p">(</span><span class="n">t0</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">matshow</span><span class="p">(</span><span class="n">t127</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">matshow</span><span class="p">(</span><span class="n">t255</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">matshow</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;gray_r&quot;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>

<span class="c1">#for ax in (ax1, ax2, ax3, ax4):</span>
<span class="c1">#    ax.tick_params(axis=&#39;both&#39;, which=&#39;both&#39;, **nolabels)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.image.AxesImage at 0x7f9be55ef9d0&gt;
</pre></div>
</div>
<img alt="../_images/11-modules-utiles_29_1.png" src="../_images/11-modules-utiles_29_1.png" />
</div>
</div>
<p>On va nettoyer cet affichage à l’aide du dictionnaire <code class="docutils literal notranslate"><span class="pre">nolabels</span></code> et de</p>
<p>On supprime les indications d’axes adaptées aux courbes mais inutiles ici.
La modification est sauvegardée dans un dictionnaire (<code class="docutils literal notranslate"><span class="pre">nolabels</span></code>) qui sera utilisé avant l’affichage.
Oui ! En l’état de vos connaissances, ce traitement peut vous paraître un peu chimique …</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sides</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="s1">&#39;bottom&#39;</span><span class="p">)</span>
<span class="n">nolabels</span> <span class="o">=</span> <span class="p">{</span><span class="n">s</span><span class="p">:</span> <span class="kc">False</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">sides</span><span class="p">}</span>
<span class="n">nolabels</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;label</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">s</span><span class="p">:</span> <span class="kc">False</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">sides</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nolabels</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;left&#39;: False, &#39;right&#39;: False, &#39;top&#39;: False, &#39;bottom&#39;: False, &#39;labelleft&#39;: False, &#39;labelright&#39;: False, &#39;labeltop&#39;: False, &#39;labelbottom&#39;: False}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">,</span> <span class="n">ax3</span><span class="p">,</span> <span class="n">ax4</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">matshow</span><span class="p">(</span><span class="n">t0</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">matshow</span><span class="p">(</span><span class="n">t127</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">matshow</span><span class="p">(</span><span class="n">t255</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">matshow</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;gray_r&quot;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>

<span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">,</span> <span class="n">ax3</span><span class="p">,</span> <span class="n">ax4</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">nolabels</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/11-modules-utiles_33_0.png" src="../_images/11-modules-utiles_33_0.png" />
</div>
</div>
<p>Voilà exactement ce qu’on souhaitait !</p>
<p><strong>Exercice.</strong></p>
<ul class="simple">
<li><p>Regardez ce que donne la <code class="docutils literal notranslate"><span class="pre">cmap=&quot;gray_r&quot;</span></code> ?</p></li>
</ul>
</section>
<section id="a-vous-maintenant">
<h3><span class="section-number">8.2.5. </span>A vous maintenant !<a class="headerlink" href="#a-vous-maintenant" title="Permalink to this headline">#</a></h3>
<section id="le-flocon-de-von-koch">
<h4>Le flocon de Von Koch<a class="headerlink" href="#le-flocon-de-von-koch" title="Permalink to this headline">#</a></h4>
<p>Le flocon de Von Koch (1906) est une courbe fractale
(continue partout et dérivable nulle part) obtenue comme la limite
de la transformation suivante appliquée récursivement à un segment
de départ.</p>
<ul class="simple">
<li><p>le segment est découpée en 3 parties égales,</p></li>
<li><p>le segment intermédiaire est remplacé par deux segments formant un triangle équilatéral avec le segment supprimé,</p></li>
<li><p>et ainsi de suite sur les 4 segments ainsi obtenus.</p></li>
</ul>
<p>Voici les cinq premières courbes obtenues à partir d’un segment droit
ou d’un triangle équilatéral : le flocon de Von Koch.<br />
On parle aussi de courbe de Von Koch d’ordre <span class="math notranslate nohighlight">\(n\)</span> pour la courbe de la
<span class="math notranslate nohighlight">\(n\)</span>-ième récursion – les tracés suivants correspondent aux segments
de Von Koch d’ordres <span class="math notranslate nohighlight">\(0, \cdots, 4\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Image</span> 
<span class="n">Image</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;./fig/cinqsegmentsvk.jpg&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/11-modules-utiles_37_0.jpg" src="../_images/11-modules-utiles_37_0.jpg" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Image</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;./fig/cinqflocons.jpg&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/11-modules-utiles_38_0.jpg" src="../_images/11-modules-utiles_38_0.jpg" />
</div>
</div>
<p><strong>Traçons-le !</strong></p>
<p>On va se limiter à celui avec un segment de départ.<br />
Avec <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>, on choisit de calculer les coordonnées des sommets des
transformés successifs du segment de départ, puis de les tracer comme
une courbe.</p>
<ol class="simple">
<li><p>Écrire la fonction <code class="docutils literal notranslate"><span class="pre">segvk()</span></code> qui à partir  des
extrémités d’un segment  <span class="math notranslate nohighlight">\([a, b]\)</span>, par exemple définies par ses
affixes complexes,  calcule et retourne la liste  (des affixes)
des points significatifs d’une itération de Von Koch de <span class="math notranslate nohighlight">\([a, b]\)</span>.</p></li>
<li><p>Écrire la fonction <code class="docutils literal notranslate"><span class="pre">listevk()</span></code> qui applique une itération de Von
Koch  à une liste de segments.</p></li>
<li><p>Apliquer ces fonctions pour obtenir le tracé <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> des
premières itérations du segment <span class="math notranslate nohighlight">\([-1, 1]\)</span>.</p></li>
</ol>
<p>Il est agréable d’obtenir ces tracés sous la forme de sous-figures comme présenté ci-dessus.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Image</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;./fig/plt-segvk.png&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">520</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/11-modules-utiles_40_0.png" src="../_images/11-modules-utiles_40_0.png" />
</div>
</div>
</section>
</section>
</section>
<section id="star-mesurer-le-temps-d-execution-d-un-programme">
<h2><span class="section-number">8.3. </span>(<span class="math notranslate nohighlight">\(\star\)</span>) Mesurer le temps d’exécution d’un programme<a class="headerlink" href="#star-mesurer-le-temps-d-execution-d-un-programme" title="Permalink to this headline">#</a></h2>
<section id="pas-si-simple">
<h3><span class="section-number">8.3.1. </span>Pas si simple …<a class="headerlink" href="#pas-si-simple" title="Permalink to this headline">#</a></h3>
<p>Mesurer le temps d’exécution d’un programme sur une machine actuelle
est une une tâche beaucoup plus ardue qu’il n’y parait.
En effet, l’impression que l’<strong>exécution</strong> de votre programme
<strong>mobilise à elle seule les ressources</strong> de votre ordinateur est une
<strong>illusion</strong>.</p>
<p>Le <strong>temps</strong> que vous attendez pour obtenir votre résultat, même si cela
vous parait instantané, est en fait <strong>partagé</strong> : pendant ce même temps,
votre ordinateur  effectue certainement de nombreuses autres tâches,
par exemple liées au système d’exploitation, aux périphériques, à
d’autres utilisateurs si votre machine gère plusieurs sessions, …</p>
<p>Par ailleurs, les unités de calculs et l’organisation (des niveaux) de
la mémoire compliquent très fortement la mesure fiable des temps
d’exécution et leur analyse.</p>
<p>En pratique, <strong>plus ce que vous voulez mesurer est court, plus la mesure
sera incertaine et non reproductible</strong>.</p>
<p>Pour ce qui nous intéresse,
l’obtention d’une mesure significative consistera à :</p>
<ol class="simple">
<li><p>répéter l’exécution dans une boucle,</p></li>
<li><p>mesurer le temps d’excution de <strong>cette boucle</strong> et</p></li>
<li><p>en retenir la moyenne.
Il n’est pas inutile de répéter ce type de mesures et le cas échéant
de traiter l’échantillon obtenu.</p></li>
</ol>
<p>Les “gros problèmes” sont aussi sujets à remarque.</p>
<ul class="simple">
<li><p>Des tailles de données importantes nécessitent un volume important de
transferts entre la mémoire et les unités de calcul.</p></li>
<li><p>Ces transferts mémoire sont complexes ;</p></li>
<li><p>leurs temps est :</p>
<ul>
<li><p>d’une part non linéaire par rapport à la taille des données,</p></li>
<li><p>et d’autre part beaucoup plus important que les temps de calcul souvent associés.</p></li>
</ul>
</li>
</ul>
<p>A titre indicatif, il y a <strong>un facteur 10 entre ce temps de transfert
et le temps d’un calcul arithmétique élémentaire</strong>.</p>
<ul class="simple">
<li><p>ce qui veut dire qu’il faut 10 fois plus de temps pour lire deux valeurs en mémoire que pour faire leur addition, par exemple.</p></li>
</ul>
<p>Ainsi, les mesures peuvent être surprenantes lorsqu’elles deviennent
“dominées” par ces temps de transfert.<br />
Le modèle de nos analyses de la complexité des algorithmes ne prend
pas en compte cet aspect vite technique.</p>
<p>Pour finir, ceci illustre la différence entre les propriétés d’un
algorithme et celles de ses mises en oeuvre et, par la même occasion,
confirme l’intérêt des notations asymptotiques <span class="math notranslate nohighlight">\(\cal{O}\)</span>, <span class="math notranslate nohighlight">\(\theta\)</span>,
<span class="math notranslate nohighlight">\(\Omega\)</span> dont on a souvent signalé qu’elle masquent pas mal de
détails.</p>
</section>
<section id="mesurer-avec-le-module-time">
<h3><span class="section-number">8.3.2. </span>Mesurer avec le module <code class="docutils literal notranslate"><span class="pre">time</span></code><a class="headerlink" href="#mesurer-avec-le-module-time" title="Permalink to this headline">#</a></h3>
<p>Ce module python fournit beaucoup de fonctions en rapport avec le temps :
gestions de calendriers, des systèmes horaires, d’horloges …</p>
<p>Il permet aussi une estimation des temps d’exécution des programmes
python (et autres).
La qualité de cette estimation dépend des mises en oeuvre de ce
module et des machines visées.
Vous pouvez <strong>être relativement confiant sur vos PC-linux ou mac</strong>.</p>
<ul class="simple">
<li><p>La fonction  <code class="docutils literal notranslate"><span class="pre">time()</span></code> est annoncée avec une précision de la
seconde, sans que ce soit garanti pour toutes les machines.<br />
<em>Une seconde : c’est beaucoup !</em> C’est en effet suffisamment long pour
effectuer 2 giga = 2 <span class="math notranslate nohighlight">\(\cdot 10^9\)</span> opérations …<br />
<code class="docutils literal notranslate"><span class="pre">time()</span></code>  peut donc être utile pour des <strong>mesures grossières</strong> ou des
exécutions <strong>de très gros volumes</strong>.</p></li>
</ul>
<ul class="simple">
<li><p>La fonction <code class="docutils literal notranslate"><span class="pre">perf_counter()</span></code> est définie depuis python3.3.<br />
Lorsqu’elle est disponible, elle permet les mesures les plus fines
possibles adaptées à la mesure des temps d’exécution de programmes
(sans être pour autant exacte, ni reproductible).<br />
Elle utilise des fonctions spécifiques aux architectures des machines
qui exploitent les <strong>compteurs matériels</strong>.</p></li>
</ul>
<p>Ces fonctions sont <strong>très simples à utiliser</strong><br />
On procède en deux appels qui encadrent la portion de code à mesurer.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">t0</span> <span class="pre">=</span> <span class="pre">time.perf_counter()</span></code>: le premier appel initialise une valeur initiale
<code class="docutils literal notranslate"><span class="pre">t0</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">t</span> <span class="pre">=</span> <span class="pre">time.perf_counter()</span></code>: le second appel  mesure <code class="docutils literal notranslate"><span class="pre">t</span></code> à l’issue de
l’exécution de la portion de code</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">t</span> <span class="pre">-</span> <span class="pre">t0</span></code></strong> est la mesure de ce temps d’exécution (moyennant les
réserves précédentes).</p></li>
</ul>
<p>Ne pas oublier de <em>boucler autour</em> de la portion à analyser et de <em>mesurer à l’extérieur</em> de cette boucle.</p>
</section>
<section id="un-benchmark-en-theta-n-la-somme-iterative">
<h3><span class="section-number">8.3.3. </span>Un <em>benchmark</em> en  <span class="math notranslate nohighlight">\(\theta(n)\)</span> : la somme itérative<a class="headerlink" href="#un-benchmark-en-theta-n-la-somme-iterative" title="Permalink to this headline">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">sommer()</span></code> : l’algorithme classique par accumulation itérative.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">sommer</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">dim_t</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;somme itérative de n valeurs entières stockées dans un tableau</span>
<span class="sd">    entrées. t : tab d&#39;int de longueur n</span>
<span class="sd">    retourne. res : int</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">res</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">dim_t</span><span class="p">):</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">res</span> <span class="o">+</span> <span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">res</span>

<span class="c1"># les 10 premiers entiers</span>
<span class="n">tab10</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)]</span>

<span class="c1"># somme itérative</span>
<span class="n">s1</span> <span class="o">=</span> <span class="n">sommer</span><span class="p">(</span><span class="n">tab10</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tab10</span><span class="p">))</span>

<span class="c1"># somme des n premiers entiers</span>
<span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">tab10</span><span class="p">)</span>
<span class="n">s2</span> <span class="o">=</span> <span class="n">n</span> <span class="o">*</span> <span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">//</span><span class="mi">2</span>

<span class="nb">print</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span> <span class="s1">&#39; = &#39;</span><span class="p">,</span> <span class="n">s2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>45  =  45
</pre></div>
</div>
</div>
</div>
</section>
<section id="un-premier-exemple">
<h3><span class="section-number">8.3.4. </span>Un premier exemple<a class="headerlink" href="#un-premier-exemple" title="Permalink to this headline">#</a></h3>
<p>où on compare <code class="docutils literal notranslate"><span class="pre">time.time()</span></code> et <code class="docutils literal notranslate"><span class="pre">time.perf_counter()</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># pour afficher les sorties matplotlib dans le notebook</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1"># formats affichage : fx.format(val)</span>
<span class="n">fint</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{:0=8}</span><span class="s2">&quot;</span> <span class="c1">#entier sur 7 digits complete avec 0 a gauche</span>
<span class="n">fexp</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{:7.3e}</span><span class="s2">&quot;</span><span class="c1">#float en notation e sur 7 digits dont 3 apres le .</span>
<span class="n">ffl</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{:5.1f}</span><span class="s2">&quot;</span> <span class="c1">#float sur 5 digits dont au plus 1 apres le .</span>

<span class="c1"># timings operations en O(n) </span>
<span class="n">dim</span> <span class="o">=</span> <span class="mi">10000</span>
<span class="n">dimmax</span> <span class="o">=</span> <span class="n">dim</span>

<span class="c1"># 1. avec des listes python</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">dimmax</span><span class="p">)]</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">dimmax</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># nb repetititions de chaque mesure</span>
<span class="n">nbrepet</span> <span class="o">=</span> <span class="mi">20</span>

<span class="c1"># time : timings operations en O(n) </span>
<span class="c1"># les mesures sont à l&#39;intérieur de la répétition</span>
<span class="c1"># car on veut évaluer la sensibilité de ces bestiolles</span>

<span class="n">t_time</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># les mesures</span>
<span class="k">for</span> <span class="n">repet</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nbrepet</span><span class="p">):</span> 
    <span class="c1"># la mesure</span>
    <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">sommer</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">dimmax</span><span class="p">)</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="c1">#</span>
    <span class="n">t_time</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="o">-</span><span class="n">t0</span><span class="p">)</span>

<span class="c1"># perf_counter</span>
<span class="n">t_tsc</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># les mesures</span>
<span class="k">for</span> <span class="n">repet</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nbrepet</span><span class="p">):</span>
    <span class="c1"># la mesure</span>
    <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">sommer</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">dimmax</span><span class="p">)</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
    <span class="c1">#</span>
    <span class="n">t_tsc</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="o">-</span><span class="n">t0</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># aff mesures    </span>
<span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nbrepet</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">fexp</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">t_time</span><span class="p">[</span><span class="n">r</span><span class="p">])</span> <span class="p">,</span> <span class="n">fexp</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">t_tsc</span><span class="p">[</span><span class="n">r</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>6.731e-04 5.946e-04
6.258e-04 5.874e-04
5.980e-04 6.972e-04
6.039e-04 6.568e-04
5.941e-04 8.268e-04
6.249e-04 6.749e-04
1.140e-03 5.947e-04
6.473e-04 5.967e-04
6.049e-04 5.937e-04
6.039e-04 5.943e-04
5.910e-04 5.909e-04
5.908e-04 5.952e-04
5.949e-04 6.001e-04
5.949e-04 7.318e-04
5.972e-04 6.006e-04
6.032e-04 6.583e-04
7.839e-04 6.013e-04
5.932e-04 5.905e-04
5.949e-04 5.896e-04
6.030e-04 5.938e-04
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### trace</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="s2">&quot;log&quot;</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t_time</span><span class="p">,</span> <span class="s1">&#39;ro-&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;time&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t_tsc</span><span class="p">,</span> <span class="s1">&#39;b+-&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;perf_counter&quot;</span><span class="p">)</span>
<span class="c1">#</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper right&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;20 mesures répétées&#39;</span><span class="p">)</span>

<span class="c1">#fig.show()</span>
<span class="c1">#plt.close()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;20 mesures répétées&#39;)
</pre></div>
</div>
<img alt="../_images/11-modules-utiles_59_1.png" src="../_images/11-modules-utiles_59_1.png" />
</div>
</div>
</section>
</section>
<section id="premiere-mesure-de-complexite">
<h2><span class="section-number">8.4. </span>Première mesure de complexité<a class="headerlink" href="#premiere-mesure-de-complexite" title="Permalink to this headline">#</a></h2>
<section id="des-donnees-de-taille-variable">
<h3><span class="section-number">8.4.1. </span>Des données de taille variable<a class="headerlink" href="#des-donnees-de-taille-variable" title="Permalink to this headline">#</a></h3>
<p>L’analyse de complexité dépend de la taille des entrées : <span class="math notranslate nohighlight">\(n\)</span>.<br />
Allons-y pour des mesures comme <em>fonction de cette taille</em>.</p>
<p>On fait ça avec <code class="docutils literal notranslate"><span class="pre">time.time()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># timings operations en O(n) </span>

<span class="c1"># 1. créer des données</span>
<span class="n">dim</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="o">**</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">8</span><span class="p">)]</span>
<span class="n">dimmax</span> <span class="o">=</span> <span class="n">dim</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">dim</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">dimmax</span><span class="p">)]</span>

<span class="c1">### plus tard :  avec des ndarray et boucle sommer</span>
<span class="c1"># creation de ndarray numpy a partir de liste python (conversion)</span>
<span class="c1">#aa = np.array(a)</span>

<span class="n">timings_array</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># les mesures</span>
<span class="n">ratio_array</span> <span class="o">=</span> <span class="p">[]</span>    <span class="c1"># les ratios</span>

<span class="c1"># 2. mesurer</span>
<span class="n">nbrepet</span> <span class="o">=</span> <span class="mi">10</span>
<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">dim</span><span class="p">:</span> <span class="c1"># on parcours les différentes tailles</span>
    <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">repet</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nbrepet</span><span class="p">):</span> <span class="c1"># répéter les exécutions</span>
            <span class="n">sommer</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    
    <span class="c1"># timing moyen pour chaque dimension</span>
    <span class="n">tmoy</span> <span class="o">=</span> <span class="p">(</span><span class="n">t</span><span class="o">-</span><span class="n">t0</span><span class="p">)</span><span class="o">/</span><span class="n">nbrepet</span>
    <span class="n">timings_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tmoy</span><span class="p">)</span>
    <span class="n">ratio_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tmoy</span><span class="o">/</span><span class="n">n</span><span class="p">)</span>

<span class="c1"># 3. aff de controle</span>
<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dim</span><span class="p">)):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">fint</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dim</span><span class="p">[</span><span class="n">n</span><span class="p">]),</span> <span class="n">fexp</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">timings_array</span><span class="p">[</span><span class="n">n</span><span class="p">]),</span> <span class="n">fexp</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ratio_array</span><span class="p">[</span><span class="n">n</span><span class="p">]))</span>

<span class="c1"># 4. tracer</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">dim</span><span class="p">,</span> <span class="n">timings_array</span><span class="p">,</span> <span class="s1">&#39;ro-&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;sommer&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">dim</span><span class="p">,</span> <span class="n">ratio_array</span><span class="p">,</span> <span class="s1">&#39;go-&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;sommer / n &quot;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="s2">&quot;log&quot;</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="s2">&quot;log&quot;</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;n : nombre de valeurs à sommer&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;temps d&#39;exécution (en sec) ou ratio temps/taille&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>00000100 6.986e-06 6.986e-08
00001000 6.421e-05 6.421e-08
00010000 6.733e-04 6.733e-08
00100000 6.727e-03 6.727e-08
01000000 6.738e-02 6.738e-08
10000000 7.474e-01 7.474e-08
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.legend.Legend at 0x7f9be617abe0&gt;
</pre></div>
</div>
<img alt="../_images/11-modules-utiles_61_2.png" src="../_images/11-modules-utiles_61_2.png" />
</div>
</div>
<p><strong>Conclusion</strong></p>
<ul class="simple">
<li><p>on observe bien un comportement linéaire, ie. en <span class="math notranslate nohighlight">\(\theta(n)\)</span>.</p></li>
</ul>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./cm"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="9-ES-avancees.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><span class="section-number">7. </span>Les entrées-sorties (E/S) : aspects avancés</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="a1-booleens.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">9. </span>Annexe : les booléens en python (&gt;3.6)</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Ph. Langlois<br/>
  
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>