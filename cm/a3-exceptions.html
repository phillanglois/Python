
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>11. Exceptions &#8212; Python</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="1. Préparer son ordinateur et travailler avec Python et JupyterLab" href="../tp/0-installation.html" />
    <link rel="prev" title="10. Les ‘ndarray’ : de vrais tableaux en python" href="a2-ndarray.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/python.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Python</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../bonjour.html">
                    Bienvenu en Prog Python!
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  COURS
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="0-synthese.html">
   1. Synthèse introductive à Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="1-fonctions.html">
   2. Fonctions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2-boucles-avancees.html">
   3. Boucles, tableaux et fonctions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="3-ES-fichiers.html">
   4. Entrées-sorties simples avec des fichiers
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="5-types_composes.html">
   5. Les types composés
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="7-fonctions-avancees.html">
   6. Sous-programme et affectation – aspects avancés
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="9-ES-avancees.html">
   7. Les entrées-sorties (E/S) : aspects avancés
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="11-modules-utiles.html">
   8. Modules utiles
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="a1-booleens.html">
   9. Annexe : les booléens en python (&gt;3.6)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="a2-ndarray.html">
   10. Les ‘ndarray’ : de vrais tableaux en python
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   11. Exceptions
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  TP
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../tp/0-installation.html">
   1. Préparer son ordinateur et travailler avec Python et JupyterLab
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tp/1-bases.html">
   2. Feuille 1
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tp/2-knn.html">
   3. Feuille 2
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tp/3-env-convexe.html">
   4. Feuille 3
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Compléments
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../pdf/memento.html">
   1. Memento
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/phillanglois/Python/main?urlpath=tree/chps2022/cm/a3-exceptions.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>
<a href="https://github.com/phillanglois/Python/issues/new?title=Issue%20on%20page%20%2Fcm/a3-exceptions.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="bottom"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>

</a>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/cm/a3-exceptions.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#principes">
   11.1. Principes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#les-exceptions-predefinies">
   11.2. Les exceptions prédéfinies
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#traitement-des-exceptions-en-python">
   11.3. Traitement des exceptions en python
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#premier-exemple-gentil">
     11.3.1. Premier exemple gentil
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#remarques">
     11.3.2. Remarques
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exemples">
     11.3.3. Exemples
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exceptions-definies-par-l-utilisateur">
   11.4. Exceptions définies par l’utilisateur
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#levee-d-exception-predefinie">
     11.4.1. Levée d’exception prédéfinie
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#definir-ses-propres-exceptions">
     11.4.2. Définir ses propres exceptions
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#precondition">
   11.5. Précondition
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#synthese">
   11.6. Synthèse
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Exceptions</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#principes">
   11.1. Principes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#les-exceptions-predefinies">
   11.2. Les exceptions prédéfinies
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#traitement-des-exceptions-en-python">
   11.3. Traitement des exceptions en python
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#premier-exemple-gentil">
     11.3.1. Premier exemple gentil
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#remarques">
     11.3.2. Remarques
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exemples">
     11.3.3. Exemples
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exceptions-definies-par-l-utilisateur">
   11.4. Exceptions définies par l’utilisateur
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#levee-d-exception-predefinie">
     11.4.1. Levée d’exception prédéfinie
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#definir-ses-propres-exceptions">
     11.4.2. Définir ses propres exceptions
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#precondition">
   11.5. Précondition
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#synthese">
   11.6. Synthèse
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="exceptions">
<h1><span class="section-number">11. </span>Exceptions<a class="headerlink" href="#exceptions" title="Permalink to this headline">#</a></h1>
<p>Programmation.</p>
<p>Version 2020 (PhL).</p>
<p><strong>NOTE 2022</strong> Reprendre ce chapitre pour afficher les exceptions levées par le nb.
Metadata de ce nb maj avec
<code class="docutils literal notranslate"><span class="pre">allow_errors:</span> <span class="pre">true</span></code>
cf <a class="reference external" href="https://jupyterbook.org/content/execute.html#execution-configuration">doc</a></p>
<h1>Table des matieres<span class="tocSkip"></span></h1>
<div class="toc"><ul class="toc-item"><li><span><a href="#Principes" data-toc-modified-id="Principes-1"><span class="toc-item-num">1&nbsp;&nbsp;</span>Principes</a></span></li><li><span><a href="#Les-exceptions-prédéfinies" data-toc-modified-id="Les-exceptions-prédéfinies-2"><span class="toc-item-num">2&nbsp;&nbsp;</span>Les exceptions prédéfinies</a></span></li><li><span><a href="#Traitement-des-exceptions-en-python" data-toc-modified-id="Traitement-des-exceptions-en-python-3"><span class="toc-item-num">3&nbsp;&nbsp;</span>Traitement des exceptions en python</a></span><ul class="toc-item"><li><span><a href="#Premier-exemple-gentil" data-toc-modified-id="Premier-exemple-gentil-3.1"><span class="toc-item-num">3.1&nbsp;&nbsp;</span>Premier exemple gentil</a></span></li><li><span><a href="#Remarques" data-toc-modified-id="Remarques-3.2"><span class="toc-item-num">3.2&nbsp;&nbsp;</span>Remarques</a></span></li><li><span><a href="#Exemples" data-toc-modified-id="Exemples-3.3"><span class="toc-item-num">3.3&nbsp;&nbsp;</span>Exemples</a></span></li></ul></li><li><span><a href="#Exceptions-définies-par-l'utilisateur" data-toc-modified-id="Exceptions-définies-par-l'utilisateur-4"><span class="toc-item-num">4&nbsp;&nbsp;</span>Exceptions définies par l'utilisateur</a></span><ul class="toc-item"><li><span><a href="#Levée-d'exception-prédéfinie" data-toc-modified-id="Levée-d'exception-prédéfinie-4.1"><span class="toc-item-num">4.1&nbsp;&nbsp;</span>Levée d'exception prédéfinie</a></span></li><li><span><a href="#Définir-ses-propres-exceptions" data-toc-modified-id="Définir-ses-propres-exceptions-4.2"><span class="toc-item-num">4.2&nbsp;&nbsp;</span>Définir ses propres exceptions</a></span></li></ul></li><li><span><a href="#Précondition" data-toc-modified-id="Précondition-5"><span class="toc-item-num">5&nbsp;&nbsp;</span>Précondition</a></span></li><li><span><a href="#Synthèse" data-toc-modified-id="Synthèse-6"><span class="toc-item-num">6&nbsp;&nbsp;</span>Synthèse</a></span></li></ul></div><section id="principes">
<h2><span class="section-number">11.1. </span>Principes<a class="headerlink" href="#principes" title="Permalink to this headline">#</a></h2>
<p>Motivation : certains traitements ne peuvent pas s’effectuer correctement. Comme par exemple l’évaluation d’une racine carrée négative, une division par zéro, la lecture au delà de la fin d’un fichier, l’écriture au delà de la zone mémoire accessible, …</p>
<p>Ces situations <em>exceptionnelles</em> sont prises en compte par le mécanisme des <em>exceptions</em>.</p>
<p>3 étapes :</p>
<ol class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">raise</span></code>: l’apparition de la situation exceptionnelle <em>lève</em> une exception</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">except</span></code>: un <em>traitement de substitution</em> (ou <em>traite exception</em>) défini pour gérer au mieux l’exception concernée est appliqué</p></li>
<li><p>suite à ce traitement : <em>reprise</em> ou <em>abandon</em> du traitement initial.</p></li>
</ol>
<p>En général, la levée d’une exception correspond à une situation <em>anormale</em> du traitement. Ainsi le traitement normal est <em>interrompu</em> et le <em>traite exception</em> a pour objectif de “limiter la casse”.
Il est rare, mais pas impossible, qu’un <em>traite exception</em> permette de reprendre l’exécution normale du traitement principal.</p>
<p>Il existe deux types d’exceptions.</p>
<ul class="simple">
<li><p>les <strong>exceptions prédéfinies</strong> par le langage ou par des modules utilisés</p></li>
<li><p>les exceptions définies par l’utilisateur</p></li>
</ul>
<div class="alert alert-block alert-info">
Bien distinguer les _erreurs de syntaxe_ à l'interprétation/compilation des exceptions à _l'exécution_. 
</div></section>
<section id="les-exceptions-predefinies">
<h2><span class="section-number">11.2. </span>Les exceptions prédéfinies<a class="headerlink" href="#les-exceptions-predefinies" title="Permalink to this headline">#</a></h2>
<p>En python (et dans d’autres langages), ces exceptions sont nombreuses.
Voir par exemple : <a class="reference external" href="https://docs.python.org/fr/3.5/library/exceptions.html">doc python</a></p>
<p>Elles sont organisées selon leur origine (système, calcul, mémoire, exécution, périphérique, …) par groupe et/ou de façon hierarchisée : <a class="reference external" href="https://docs.python.org/fr/3.5/library/exceptions.html#exception-hierarchy">hierarchie des exceptions python</a></p>
<p>Parmi les exceptions les plus souvent rencontrées :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="ne">ArithmeticError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">FloatingPointError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">OverflowError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">ZeroDivisionError</span>
<span class="o">-</span> <span class="ne">EOFError</span>
<span class="o">-</span> <span class="ne">NameError</span>
<span class="o">-</span> <span class="ne">OSError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">FileExistsError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">FileNotFoundError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">IsADirectoryError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">NotADirectoryError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">PermissionError</span>
<span class="o">-</span> <span class="ne">RuntimeError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">NotImplementedError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">RecursionError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">SyntaxError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">IndentationError</span>
      <span class="o">|</span>         <span class="o">+--</span> <span class="ne">TabError</span>
<span class="o">-</span> <span class="ne">TypeError</span>
<span class="o">-</span> <span class="ne">ValueError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">UnicodeError</span>
</pre></div>
</div>
<p><strong>Remarque</strong> :</p>
<ul class="simple">
<li><p>Expliquer pourquoi les exceptions <code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code> ou <code class="docutils literal notranslate"><span class="pre">IndentationError</span></code> peuvent être levées à l’exécution ?</p></li>
</ul>
</section>
<section id="traitement-des-exceptions-en-python">
<h2><span class="section-number">11.3. </span>Traitement des exceptions en python<a class="headerlink" href="#traitement-des-exceptions-en-python" title="Permalink to this headline">#</a></h2>
<p>La gestion des exceptions s’effectue avec la construction suivante qui <strong>encadre les zones à risques</strong> :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span> <span class="p">:</span>
    <span class="c1"># la partie du traitement principal susceptible de mal se passer</span>
<span class="k">except</span> <span class="n">UneException</span><span class="p">:</span>
    <span class="c1"># traitement prévu si l&#39;exception `UneException` est levée</span>
<span class="k">except</span> <span class="p">(</span><span class="n">UneAutre</span><span class="p">,</span> <span class="n">EtEncoreUneAutre</span><span class="p">):</span>
    <span class="c1"># traitement prévu si les exceptions `UneAutre` ou `EncoreUneAutre` sont levées</span>
<span class="k">except</span><span class="p">:</span>
    <span class="c1"># traitement prévu si toute autre exception est levée</span>
<span class="k">else</span><span class="p">:</span>
    <span class="c1"># traitement si aucune exception n&#39;a été levée dans le bloc &#39;try&#39; </span>
</pre></div>
</div>
<p>**Principe **</p>
<ul class="simple">
<li><p>le bloc <code class="docutils literal notranslate"><span class="pre">try</span></code> est exécuté</p></li>
<li><p>si aucune exception est levée par cette exécution, les blocs <code class="docutils literal notranslate"><span class="pre">except</span></code> sont sautés et le traitement continue normalement après l’instruction <code class="docutils literal notranslate"><span class="pre">try</span></code></p>
<ul>
<li><p>dans le bloc <code class="docutils literal notranslate"><span class="pre">else</span></code> si il existe</p></li>
<li><p>sinon à l’instruction suivante de même niveau que le <code class="docutils literal notranslate"><span class="pre">try</span></code></p></li>
</ul>
</li>
<li><p>si une instruction du bloc <code class="docutils literal notranslate"><span class="pre">try</span></code> lève une exception :</p>
<ul>
<li><p>le bloc <code class="docutils literal notranslate"><span class="pre">try</span></code> est <em>immédiatement</em> abandonné : il n’est donc pas exécuté en entier</p></li>
<li><p>on recherche si un traite exception correspondant à l’exception levée est défini</p>
<ul>
<li><p>si oui : on l’exécute et on continue après l’instruction <code class="docutils literal notranslate"><span class="pre">try</span></code></p></li>
<li><p>si non : l’exception est propagée au <code class="docutils literal notranslate"><span class="pre">try</span></code> de niveau englobant.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<section id="premier-exemple-gentil">
<h3><span class="section-number">11.3.1. </span>Premier exemple gentil<a class="headerlink" href="#premier-exemple-gentil" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#x = float(input(&quot;Un float stp :&quot;))</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">3</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Son inverse vaut&quot;</span><span class="p">,</span> <span class="mf">1.</span><span class="o">/</span><span class="n">x</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;et on vérifie : x * 1/x =&quot;</span><span class="p">,</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">1</span><span class="o">/</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Son inverse vaut 0.3333333333333333
et on vérifie : x * 1/x = 1.0
</pre></div>
</div>
</div>
</div>
<p>Le traitement précédent (qui mélange ES et traitements) comporte une situation exceptionnelle qui va lever l’exception arithmétique <code class="docutils literal notranslate"><span class="pre">ZeroDivisionError</span></code> dans le cas suivant.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Son inverse vaut&quot;</span><span class="p">,</span>  <span class="mf">1.</span><span class="o">/</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>---------------------------------------------------------------------------
ZeroDivisionError                         Traceback <span class="o">(</span>most recent call last<span class="o">)</span>
&lt;ipython-input-2-56b7ed41bd3d&gt; <span class="k">in</span> &lt;module&gt;
      <span class="m">1</span> <span class="nv">x</span> <span class="o">=</span> float<span class="o">(</span>input<span class="o">(</span><span class="s2">&quot;Un float stp :&quot;</span><span class="o">))</span>
----&gt; <span class="m">2</span> print<span class="o">(</span><span class="s2">&quot;Son inverse vaut&quot;</span>,  <span class="m">1</span>./x<span class="o">)</span>

ZeroDivisionError: float division by zero
</pre></div>
</div>
<p>On encadre la zone dangereuse avec un bloc <code class="docutils literal notranslate"><span class="pre">try</span> <span class="pre">-</span> <span class="pre">except</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span> <span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Un float stp :&quot;</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Son inverse vaut&quot;</span><span class="p">,</span> <span class="mf">1.</span><span class="o">/</span><span class="n">x</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ZeroDivisionError</span> <span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Un float NON NUL stp :&quot;</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Son inverse vaut&quot;</span><span class="p">,</span> <span class="mf">1.</span><span class="o">/</span><span class="n">x</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Désolé : on ne peut rien pour toi&quot;</span><span class="p">)</span>
    <span class="k">raise</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;et on vérifie : x * 1/x =&quot;</span><span class="p">,</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">1</span><span class="o">/</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Désolé : on ne peut rien pour toi
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">StdinNotImplementedError</span><span class="g g-Whitespace">                  </span>Traceback (most recent call last)
<span class="nn">/var/folders/32/9hkmzrf11t38ckpktjnyfsfc0000gn/T/ipykernel_11688/1595260940.py</span> in <span class="ni">&lt;cell line: 1&gt;</span><span class="nt">()</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="k">try</span> <span class="p">:</span>
<span class="ne">----&gt; </span><span class="mi">2</span>     <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Un float stp :&quot;</span><span class="p">))</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span>     <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Son inverse vaut&quot;</span><span class="p">,</span> <span class="mf">1.</span><span class="o">/</span><span class="n">x</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="k">except</span> <span class="ne">ZeroDivisionError</span> <span class="p">:</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span>     <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Un float NON NUL stp :&quot;</span><span class="p">))</span>

<span class="nn">~/.local/share/virtualenvs/Python-RIyjAoYI/lib/python3.9/site-packages/ipykernel/kernelbase.py</span> in <span class="ni">raw_input</span><span class="nt">(self, prompt)</span>
<span class="g g-Whitespace">   </span><span class="mi">1001</span>         <span class="s2">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">1002</span><span class="s2">         if not self._allow_stdin:</span>
<span class="ne">-&gt; </span><span class="mi">1003</span><span class="s2">             raise StdinNotImplementedError(</span>
<span class="g g-Whitespace">   </span><span class="mi">1004</span><span class="s2">                 &quot;raw_input was called, but this frontend does not support input requests.&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">1005</span><span class="s2">             )</span>

<span class="ne">StdinNotImplementedError</span>: raw_input was called, but this frontend does not support input requests.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span> <span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Un float stp :&quot;</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Son inverse vaut&quot;</span><span class="p">,</span> <span class="mf">1.</span><span class="o">/</span><span class="n">x</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ZeroDivisionError</span> <span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Un float NON NUL stp :&quot;</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Son inverse vaut&quot;</span><span class="p">,</span> <span class="mf">1.</span><span class="o">/</span><span class="n">x</span><span class="p">)</span>
<span class="k">except</span> <span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Désolé : on ne peut rien pour toi&quot;</span><span class="p">)</span>
    <span class="k">raise</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;et on vérifie : x * 1/x =&quot;</span><span class="p">,</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">1</span><span class="o">/</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Désolé : on ne peut rien pour toi
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">StdinNotImplementedError</span><span class="g g-Whitespace">                  </span>Traceback (most recent call last)
<span class="nn">/var/folders/32/9hkmzrf11t38ckpktjnyfsfc0000gn/T/ipykernel_11688/976888394.py</span> in <span class="ni">&lt;cell line: 1&gt;</span><span class="nt">()</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="k">try</span> <span class="p">:</span>
<span class="ne">----&gt; </span><span class="mi">2</span>     <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Un float stp :&quot;</span><span class="p">))</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span>     <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Son inverse vaut&quot;</span><span class="p">,</span> <span class="mf">1.</span><span class="o">/</span><span class="n">x</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="k">except</span> <span class="ne">ZeroDivisionError</span> <span class="p">:</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span>     <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Un float NON NUL stp :&quot;</span><span class="p">))</span>

<span class="nn">~/.local/share/virtualenvs/Python-RIyjAoYI/lib/python3.9/site-packages/ipykernel/kernelbase.py</span> in <span class="ni">raw_input</span><span class="nt">(self, prompt)</span>
<span class="g g-Whitespace">   </span><span class="mi">1001</span>         <span class="s2">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">1002</span><span class="s2">         if not self._allow_stdin:</span>
<span class="ne">-&gt; </span><span class="mi">1003</span><span class="s2">             raise StdinNotImplementedError(</span>
<span class="g g-Whitespace">   </span><span class="mi">1004</span><span class="s2">                 &quot;raw_input was called, but this frontend does not support input requests.&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">1005</span><span class="s2">             )</span>

<span class="ne">StdinNotImplementedError</span>: raw_input was called, but this frontend does not support input requests.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span> <span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Un float stp :&quot;</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Son inverse vaut&quot;</span><span class="p">,</span> <span class="mf">1.</span><span class="o">/</span><span class="n">x</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ZeroDivisionError</span> <span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Un float NON NUL stp :&quot;</span><span class="p">))</span>
<span class="k">except</span> <span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Désolé : on ne peut rien pour toi&quot;</span><span class="p">)</span>
    <span class="k">raise</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;et on vérifie : x * 1/x =&quot;</span><span class="p">,</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">1</span><span class="o">/</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Désolé : on ne peut rien pour toi
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">StdinNotImplementedError</span><span class="g g-Whitespace">                  </span>Traceback (most recent call last)
<span class="nn">/var/folders/32/9hkmzrf11t38ckpktjnyfsfc0000gn/T/ipykernel_11688/1687755633.py</span> in <span class="ni">&lt;cell line: 1&gt;</span><span class="nt">()</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="k">try</span> <span class="p">:</span>
<span class="ne">----&gt; </span><span class="mi">2</span>     <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Un float stp :&quot;</span><span class="p">))</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span>     <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Son inverse vaut&quot;</span><span class="p">,</span> <span class="mf">1.</span><span class="o">/</span><span class="n">x</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="k">except</span> <span class="ne">ZeroDivisionError</span> <span class="p">:</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span>     <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Un float NON NUL stp :&quot;</span><span class="p">))</span>

<span class="nn">~/.local/share/virtualenvs/Python-RIyjAoYI/lib/python3.9/site-packages/ipykernel/kernelbase.py</span> in <span class="ni">raw_input</span><span class="nt">(self, prompt)</span>
<span class="g g-Whitespace">   </span><span class="mi">1001</span>         <span class="s2">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">1002</span><span class="s2">         if not self._allow_stdin:</span>
<span class="ne">-&gt; </span><span class="mi">1003</span><span class="s2">             raise StdinNotImplementedError(</span>
<span class="g g-Whitespace">   </span><span class="mi">1004</span><span class="s2">                 &quot;raw_input was called, but this frontend does not support input requests.&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">1005</span><span class="s2">             )</span>

<span class="ne">StdinNotImplementedError</span>: raw_input was called, but this frontend does not support input requests.
</pre></div>
</div>
</div>
</div>
<p><strong>Analyse</strong></p>
<ul class="simple">
<li><p>Le traitement d’entrée au clavier est risqué  :</p></li>
<li><p>levée de l’exception <code class="docutils literal notranslate"><span class="pre">ZeroDivisionError</span></code> si l’utisateur entre <code class="docutils literal notranslate"><span class="pre">0</span></code></p></li>
<li><p>dans ce cas, le traite-exception permet de récupérer <em>cette</em> erreur en redemandant une autre entrée</p>
<ul>
<li><p>traitement sûr si la nouvelle entrée est correcte</p></li>
<li><p>mais ….</p></li>
</ul>
</li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span> <span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Un float stp :&quot;</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Son inverse vaut&quot;</span><span class="p">,</span> <span class="mf">1.</span><span class="o">/</span><span class="n">x</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ZeroDivisionError</span> <span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Un float NON NUL stp :&quot;</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Son inverse vaut&quot;</span><span class="p">,</span> <span class="mf">1.</span><span class="o">/</span><span class="n">x</span><span class="p">)</span>
<span class="k">except</span> <span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Désolé : on ne peut rien pour toi&quot;</span><span class="p">)</span>
    <span class="k">raise</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;et on vérifie : x * 1/x =&quot;</span><span class="p">,</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">1</span><span class="o">/</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Désolé : on ne peut rien pour toi
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">StdinNotImplementedError</span><span class="g g-Whitespace">                  </span>Traceback (most recent call last)
<span class="nn">/var/folders/32/9hkmzrf11t38ckpktjnyfsfc0000gn/T/ipykernel_11688/976888394.py</span> in <span class="ni">&lt;cell line: 1&gt;</span><span class="nt">()</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="k">try</span> <span class="p">:</span>
<span class="ne">----&gt; </span><span class="mi">2</span>     <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Un float stp :&quot;</span><span class="p">))</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span>     <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Son inverse vaut&quot;</span><span class="p">,</span> <span class="mf">1.</span><span class="o">/</span><span class="n">x</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="k">except</span> <span class="ne">ZeroDivisionError</span> <span class="p">:</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span>     <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Un float NON NUL stp :&quot;</span><span class="p">))</span>

<span class="nn">~/.local/share/virtualenvs/Python-RIyjAoYI/lib/python3.9/site-packages/ipykernel/kernelbase.py</span> in <span class="ni">raw_input</span><span class="nt">(self, prompt)</span>
<span class="g g-Whitespace">   </span><span class="mi">1001</span>         <span class="s2">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">1002</span><span class="s2">         if not self._allow_stdin:</span>
<span class="ne">-&gt; </span><span class="mi">1003</span><span class="s2">             raise StdinNotImplementedError(</span>
<span class="g g-Whitespace">   </span><span class="mi">1004</span><span class="s2">                 &quot;raw_input was called, but this frontend does not support input requests.&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">1005</span><span class="s2">             )</span>

<span class="ne">StdinNotImplementedError</span>: raw_input was called, but this frontend does not support input requests.
</pre></div>
</div>
</div>
</div>
<p><strong>Exercice</strong></p>
<ul class="simple">
<li><p>Que faire ?</p></li>
</ul>
</section>
<section id="remarques">
<h3><span class="section-number">11.3.2. </span>Remarques<a class="headerlink" href="#remarques" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p><strong>Un seul</strong> traite exception est exécuté lorsque le bloc <code class="docutils literal notranslate"><span class="pre">try</span></code> lève une exception</p></li>
<li><p>Principe de <strong>propagation ascendante d’une exception non traitée</strong> : si aucun traite-exception est rencontré pour l’exception levée,</p>
<ul>
<li><p>cette exception est <strong>propagée</strong> au niveau supérieur,</p></li>
<li><p>et ce jusqu’à rencontrer le traite-exception qui va,</p></li>
<li><p>ou à défaut d’arrêter définitivement le traitement</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">raise</span></code> propage explicitement l’exception au niveau supérieur</p></li>
<li><p><strong>Interdire</strong> le “<code class="docutils literal notranslate"><span class="pre">except</span></code> sans <code class="docutils literal notranslate"><span class="pre">raise</span></code>” qui va absorber toutes les exceptions, même celles non prévues et donc significatives d’une anomalie profonde de l’exécution</p></li>
</ul>
</section>
<section id="exemples">
<h3><span class="section-number">11.3.3. </span>Exemples<a class="headerlink" href="#exemples" title="Permalink to this headline">#</a></h3>
<p>Les ES sont des zones à risque.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span> <span class="p">:</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;./fichier_qui_n_existe_pas.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Fichier pas trouvé&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Fichier pas trouvé
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>cat ./tmp/fichier_entrees2.txt
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>6
99
21
33
</pre></div>
</div>
</div>
</div>
<p>Le comportement suivant illustre la robustesse de python :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">readline()</span></code> ne lève pas d’exception EOF</p></li>
<li><p>mais renvoit une chaine vide ;</p></li>
<li><p>ce qui n’est pas le cas de nombreux langages qui effectueraient le même traitement (incorrect)</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;./tmp/fichier_entrees2.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>

<span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">7</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
    <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;6\n&#39;, &#39;99\n&#39;, &#39;21\n&#39;, &#39;33\n&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;]
</pre></div>
</div>
</div>
</div>
<p>Peut quand-même avoir des problèmes :</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;./tmp/fichier_entrees2.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>

<span class="n">tab</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int32&#39;</span><span class="p">)</span>

<span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Nbre de valeurs à lire : &quot;</span><span class="p">))</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">tab</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">tab</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">StdinNotImplementedError</span><span class="g g-Whitespace">                  </span>Traceback (most recent call last)
<span class="nn">/var/folders/32/9hkmzrf11t38ckpktjnyfsfc0000gn/T/ipykernel_11688/370209631.py</span> in <span class="ni">&lt;cell line: 6&gt;</span><span class="nt">()</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="n">tab</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int32&#39;</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> 
<span class="ne">----&gt; </span><span class="mi">6</span> <span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Nbre de valeurs à lire : &quot;</span><span class="p">))</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span> 
<span class="g g-Whitespace">      </span><span class="mi">8</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>

<span class="nn">~/.local/share/virtualenvs/Python-RIyjAoYI/lib/python3.9/site-packages/ipykernel/kernelbase.py</span> in <span class="ni">raw_input</span><span class="nt">(self, prompt)</span>
<span class="g g-Whitespace">   </span><span class="mi">1001</span>         <span class="s2">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">1002</span><span class="s2">         if not self._allow_stdin:</span>
<span class="ne">-&gt; </span><span class="mi">1003</span><span class="s2">             raise StdinNotImplementedError(</span>
<span class="g g-Whitespace">   </span><span class="mi">1004</span><span class="s2">                 &quot;raw_input was called, but this frontend does not support input requests.&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">1005</span><span class="s2">             )</span>

<span class="ne">StdinNotImplementedError</span>: raw_input was called, but this frontend does not support input requests.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;./tmp/fichier_entrees2.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>

<span class="n">tab</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int32&#39;</span><span class="p">)</span>

<span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Nbre de valeurs à lire : &quot;</span><span class="p">))</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">tab</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Tab trop petit :&quot;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">tab</span><span class="p">))</span>
        
<span class="nb">print</span><span class="p">(</span><span class="n">tab</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">StdinNotImplementedError</span><span class="g g-Whitespace">                  </span>Traceback (most recent call last)
<span class="nn">/var/folders/32/9hkmzrf11t38ckpktjnyfsfc0000gn/T/ipykernel_11688/1503145917.py</span> in <span class="ni">&lt;cell line: 6&gt;</span><span class="nt">()</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="n">tab</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int32&#39;</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> 
<span class="ne">----&gt; </span><span class="mi">6</span> <span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Nbre de valeurs à lire : &quot;</span><span class="p">))</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span> 
<span class="g g-Whitespace">      </span><span class="mi">8</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>

<span class="nn">~/.local/share/virtualenvs/Python-RIyjAoYI/lib/python3.9/site-packages/ipykernel/kernelbase.py</span> in <span class="ni">raw_input</span><span class="nt">(self, prompt)</span>
<span class="g g-Whitespace">   </span><span class="mi">1001</span>         <span class="s2">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">1002</span><span class="s2">         if not self._allow_stdin:</span>
<span class="ne">-&gt; </span><span class="mi">1003</span><span class="s2">             raise StdinNotImplementedError(</span>
<span class="g g-Whitespace">   </span><span class="mi">1004</span><span class="s2">                 &quot;raw_input was called, but this frontend does not support input requests.&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">1005</span><span class="s2">             )</span>

<span class="ne">StdinNotImplementedError</span>: raw_input was called, but this frontend does not support input requests.
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="exceptions-definies-par-l-utilisateur">
<h2><span class="section-number">11.4. </span>Exceptions définies par l’utilisateur<a class="headerlink" href="#exceptions-definies-par-l-utilisateur" title="Permalink to this headline">#</a></h2>
<p>Le développement de modules ou de traitements peut nécessiter de prévoir des cas exceptionnels qui seraient déclenchés par leur utilisation incorrecte.</p>
<section id="levee-d-exception-predefinie">
<h3><span class="section-number">11.4.1. </span>Levée d’exception prédéfinie<a class="headerlink" href="#levee-d-exception-predefinie" title="Permalink to this headline">#</a></h3>
<p>On peut souhaiter <em>lever une exception prédéfinie</em> qui correspond au type d’erreur qu’elle couvre dans le cas général.</p>
<p>Il suffit d’exécuter :</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">raise</span> <span class="pre">telle_exception(&quot;message</span> <span class="pre">d'accompagnement&quot;)</span> </code></p>
</div></blockquote>
<p><strong>Exemple</strong><br />
Un exemple est donné dans le paragraphe suivant avec l’exception <code class="docutils literal notranslate"><span class="pre">AssertionError</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;On récupère des entrées au clavier pour initialiser un vecteur de taille fixée.</span>
<span class="sd">le traitement de la ligne 10 peut lever l&#39;exception prédéfinie IndexError&#39;&#39;&#39;</span>
<span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">cond</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">cond</span><span class="p">:</span>      
    <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Une valeur stp :&quot;</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;v est de longueur&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="s2">&quot;et&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span><span class="s2">&quot;-ième entree.&quot;</span><span class="p">)</span>
    <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>    

    
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">StdinNotImplementedError</span><span class="g g-Whitespace">                  </span>Traceback (most recent call last)
<span class="nn">/var/folders/32/9hkmzrf11t38ckpktjnyfsfc0000gn/T/ipykernel_11688/856244799.py</span> in <span class="ni">&lt;cell line: 6&gt;</span><span class="nt">()</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span> <span class="k">while</span> <span class="n">cond</span><span class="p">:</span>
<span class="ne">----&gt; </span><span class="mi">7</span>     <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Une valeur stp :&quot;</span><span class="p">))</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span>     <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">):</span>
<span class="g g-Whitespace">      </span><span class="mi">9</span>         <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;v est de longueur&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="s2">&quot;et&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span><span class="s2">&quot;-ième entree.&quot;</span><span class="p">)</span>

<span class="nn">~/.local/share/virtualenvs/Python-RIyjAoYI/lib/python3.9/site-packages/ipykernel/kernelbase.py</span> in <span class="ni">raw_input</span><span class="nt">(self, prompt)</span>
<span class="g g-Whitespace">   </span><span class="mi">1001</span>         <span class="s2">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">1002</span><span class="s2">         if not self._allow_stdin:</span>
<span class="ne">-&gt; </span><span class="mi">1003</span><span class="s2">             raise StdinNotImplementedError(</span>
<span class="g g-Whitespace">   </span><span class="mi">1004</span><span class="s2">                 &quot;raw_input was called, but this frontend does not support input requests.&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">1005</span><span class="s2">             )</span>

<span class="ne">StdinNotImplementedError</span>: raw_input was called, but this frontend does not support input requests.
</pre></div>
</div>
</div>
</div>
</section>
<section id="definir-ses-propres-exceptions">
<h3><span class="section-number">11.4.2. </span>Définir ses propres exceptions<a class="headerlink" href="#definir-ses-propres-exceptions" title="Permalink to this headline">#</a></h3>
<p>Il faut aussi pouvoir <em>définir ses propres exceptions</em></p>
<ul class="simple">
<li><p>adaptées au traitement proposé par notre module</p></li>
<li><p>et qui seront éventuellement traités par le contexte qui utilise notyre module.</p></li>
</ul>
<p>En python, la définition des exceptions passe par la définition de <em>classes</em> (et de sous-classes d’exception) intégrées au module développé.</p>
<p>N’ayant pas introduit la notion de classe, nous ne détaillerons donc pas (cette année) comment définir ses propres exceptions.</p>
</section>
</section>
<section id="precondition">
<h2><span class="section-number">11.5. </span>Précondition<a class="headerlink" href="#precondition" title="Permalink to this headline">#</a></h2>
<p>Certaines fonctions (ou traitements) sont définies avec des hypothèses sur les arguments effectifs.</p>
<ul class="simple">
<li><p>Par exemple, la division <code class="docutils literal notranslate"><span class="pre">x/y</span></code> n’est pas définie pour <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">==</span> <span class="pre">0</span></code> et ce cas lève l’exception prédéfinie <code class="docutils literal notranslate"><span class="pre">ZeroDivisionError</span></code>.</p></li>
</ul>
<p>L’instruction <strong><code class="docutils literal notranslate"><span class="pre">assert</span></code></strong> permet de vérifier une précondition.</p>
<ul class="simple">
<li><p>Une <em>précondition</em> est une expression à valeur booléenne</p>
<ul>
<li><p>Exemple : <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">!=</span> <span class="pre">0</span></code> est une précondition pour la division <code class="docutils literal notranslate"><span class="pre">x/y</span></code></p></li>
</ul>
</li>
<li><p>Si la précondition est satisfaite (True), le traitement continue normalement</p></li>
<li><p>sinon l’exception <code class="docutils literal notranslate"><span class="pre">AssertionError</span></code> est levée.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">diviser</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">y</span> <span class="o">!=</span> <span class="mi">0</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">/</span><span class="n">y</span>

<span class="nb">print</span><span class="p">(</span><span class="n">diviser</span><span class="p">(</span><span class="mf">4.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">diviser</span><span class="p">(</span><span class="mf">4.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2.0
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AssertionError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="nn">/var/folders/32/9hkmzrf11t38ckpktjnyfsfc0000gn/T/ipykernel_11688/1331964967.py</span> in <span class="ni">&lt;cell line: 6&gt;</span><span class="nt">()</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> 
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="nb">print</span><span class="p">(</span><span class="n">diviser</span><span class="p">(</span><span class="mf">4.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">))</span>
<span class="ne">----&gt; </span><span class="mi">6</span> <span class="nb">print</span><span class="p">(</span><span class="n">diviser</span><span class="p">(</span><span class="mf">4.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">))</span>

<span class="nn">/var/folders/32/9hkmzrf11t38ckpktjnyfsfc0000gn/T/ipykernel_11688/1331964967.py</span> in <span class="ni">diviser</span><span class="nt">(x, y)</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="k">def</span> <span class="nf">diviser</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="ne">----&gt; </span><span class="mi">2</span>     <span class="k">assert</span> <span class="n">y</span> <span class="o">!=</span> <span class="mi">0</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span>     <span class="k">return</span> <span class="n">x</span><span class="o">/</span><span class="n">y</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> 
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="nb">print</span><span class="p">(</span><span class="n">diviser</span><span class="p">(</span><span class="mf">4.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">))</span>

<span class="ne">AssertionError</span>: 
</pre></div>
</div>
</div>
</div>
<p>L’assertion peut être accompagnée d’un message indicatif comme annoncé plus haut.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">mon_diviser</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">y</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;mon_diviser : division par 0&quot;</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">/</span><span class="n">y</span>

<span class="nb">print</span><span class="p">(</span><span class="n">mon_diviser</span><span class="p">(</span><span class="mf">4.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mon_diviser</span><span class="p">(</span><span class="mf">4.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2.0
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AssertionError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="nn">/var/folders/32/9hkmzrf11t38ckpktjnyfsfc0000gn/T/ipykernel_11688/2903459489.py</span> in <span class="ni">&lt;cell line: 6&gt;</span><span class="nt">()</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> 
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="nb">print</span><span class="p">(</span><span class="n">mon_diviser</span><span class="p">(</span><span class="mf">4.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">))</span>
<span class="ne">----&gt; </span><span class="mi">6</span> <span class="nb">print</span><span class="p">(</span><span class="n">mon_diviser</span><span class="p">(</span><span class="mf">4.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">))</span>

<span class="nn">/var/folders/32/9hkmzrf11t38ckpktjnyfsfc0000gn/T/ipykernel_11688/2903459489.py</span> in <span class="ni">mon_diviser</span><span class="nt">(x, y)</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="k">def</span> <span class="nf">mon_diviser</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="ne">----&gt; </span><span class="mi">2</span>     <span class="k">assert</span> <span class="n">y</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;mon_diviser : division par 0&quot;</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span>     <span class="k">return</span> <span class="n">x</span><span class="o">/</span><span class="n">y</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> 
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="nb">print</span><span class="p">(</span><span class="n">mon_diviser</span><span class="p">(</span><span class="mf">4.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">))</span>

<span class="ne">AssertionError</span>: mon_diviser : division par 0
</pre></div>
</div>
</div>
</div>
<p><strong>Utilisation</strong></p>
<ul class="simple">
<li><p>Vérifier les préconditions le plus tôt possible dans le cadre de la fonction pour éviter les modification d’états qui ne seront pas menées correctement jusqu’au bout</p></li>
<li><p>Le traitement est similaire à un <code class="docutils literal notranslate"><span class="pre">if</span></code> associé à la levée de l’exception <code class="docutils literal notranslate"><span class="pre">AssertionError</span></code> mais la lecture d’une clause <code class="docutils literal notranslate"><span class="pre">assert</span></code> est plus informative qu’un <code class="docutils literal notranslate"><span class="pre">if</span></code> (parmi d’autres) sur les conditions d’utilisation du code concerné.</p></li>
<li><p>Utile au debuggage</p></li>
</ul>
</section>
<section id="synthese">
<h2><span class="section-number">11.6. </span>Synthèse<a class="headerlink" href="#synthese" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Les exceptions qualifient des traitements incorrects <em>exceptionnels</em></p></li>
<li><p>Les traites exception permettent de “récupérer la main” pour sortir au mieux du c as incorrect</p></li>
<li><p>Encadrer les zones à risque de la construction : <code class="docutils literal notranslate"><span class="pre">try:</span> <span class="pre">...</span> <span class="pre">except:</span> <span class="pre">...</span></code></p></li>
<li><p>Le mécanisme est “traitement <code class="docutils literal notranslate"><span class="pre">except</span></code> ou sinon propagation”</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">raise</span></code> pour lever ses exceptions  (prédéfinies ou personnelles)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">assert</span></code> pour définir et vérifier des préconditions</p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./cm"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="a2-ndarray.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><span class="section-number">10. </span>Les ‘ndarray’ : de vrais tableaux en python</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../tp/0-installation.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">1. </span>Préparer son ordinateur et travailler avec Python et JupyterLab</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Ph. Langlois<br/>
  
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>